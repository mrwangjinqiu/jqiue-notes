---
title: 指针
category: 编程语言
tag: C
author: JQiue
article: false
---

指针是 C 语言的灵魂，也可以说指针就是 C 语言的门面，指针简单来说就是一种特殊的变量，和普通变量不同的是，指针变量存储的是另一个变量的地址，而普通变量存储的只是一个实际的值，站在内存的角度来看，通过地址就能访问数据，那么指针也就能间接访问某个变量中的数据

定义一个指针变量和定义一个普通变量一样，只不过前面要加上`*`来表示它是一个指针变量，当然指针也是具有类型的，不同类型的变量要用不同的类型的指针

```c
int *p;
```

指针变量有了，那么如何取出其他变量的地址呢？

通过`&`运算符就可以取出某个变量的地址，将地址赋值给指针变量就行了

```c
int *p;
int a = 3;
p = &a; // 取出变量a的地址交给指针p
```

::: tip
& 运算符的操作数必须是变量，取出来的地址大小取决于编译器和系统架构
:::

这个指针已经指向了那个变量，就可以通过`*`运算符来访问数据

```c
printf("%d", *p); // 通过指针访问上述code中变量存储的数据
printf("%d", a); // 它和指针访问是等效的
```

::: tip
定义变量时的`*`和表达式中的`*`是不同的
:::

## 指针的运算

指针变量的运算实际上是地址的运算，C 语言规定一个地址加上或减去一个整数 n，其运算结果仍然是一个地址

## 数组与指针

数组本身就表达地址，因此数组的地址不需要用`&`取出，但数组的元素表达的是变量，需要使用取地址符

因此`[]`运算符可以对数组变量做，也可以对指针变量做

如果把一个数组当作参数传递给一个函数，这个函数接收的也是一个指针，所以要定义指针变量接收

```c
int foo(int *arr){
  return 0;
}
int main(){
  int arr[3] = {1, 2, 3};
  int *p;
  p = arr; // 数组名即指针地址
  foo(arr); // 接收数组时，需要在函数中定义指针变量接收
  return 0;
}
```
