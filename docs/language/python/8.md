---
title: 文件操作
category: 编程语言
tag: Python
author: JQiue
article: false
---

Python 通过一些内置函数就可以进行一些系统文件的操作

模式|文件类型|操作方式|文件不存在时|是否覆盖写
---|---|---|---|---
r|文本文件|只读|报错|-
r+|文本文件|可读可写|报错|是
w|文本文件|只写|新建文件|是
w+|文本文件|可读可写|新建文件|是
a|文本文件|可写|新建文件|否
a+|文本文件|可读可写|新建文件|否
rb|二进制文件|只读|报错|-
rb+|二进制文件|可读可写|报错|是
wb|二进制文件|只写|新建文件|是
wb+|二进制文件|可读可写|新建文件|是
ab|文本二进制文件文件|可写|新建文件|否
ab+|二进制文件|可读可写|新建文件|否

总结：r 和 w 都是覆盖写，a 是追加，r 找不到文件时报错，w 找不到文件则创建文件

## 打开文件

在打开文件之前须提供文件的路径，以及操作模式，Python 通过 open 函数来指定操作的文件以及操作模式，open 函数会返回该文件的对象，以供调用该对象的各种方法来实现文件的操作

```python
file = open(文件路径, 操作模式)
```

## 读文件

+ read()：读取文件中所有的数据并返回字符串，可以指定参数来决定读取的长度
+ readline()：方法单行读取并将指针向下移动，并返回字符串
+ readlines()：方法读取全部行的内容，将每一行作为一个元素的列表返回

## 写文件

+ write()：写入字符串并返回字符串长度
+ writelines()：方法写入可迭代类型（元素必须是字符串类型）

::: tip
在 Windows 中，写入操作一定要注意编码问题，否则会出现写入乱码的情况，尽量在打开文件的时候指定文件编码
:::

## 关闭文件

不管是读还是写，都应该在最后调用该文件对象的 close 方法来关闭流，否则数据不会保留

```python
file.close()
```

每次都需要调用 close 方法来关闭文件未免繁琐，Python 提供了 with 关键字来解决文件的自动关闭操作

## 文件的指针

文件的读写操作都是依靠指针定位的，随着文件的不断操作，指针位置会不断的改变

+ tell()：来获取当前指针在文件中的位置
+ seek(offset, whence)：重新定位指针，offset 定义偏移量，whence 定义偏移的位置，为 0 表示从头开始，为 1 表示从当前位置开始，为 2 表示从结尾开始

::: tip whence 取值
如果取值不为 0，则应该使用二进制文件打开，否则会报错
:::
